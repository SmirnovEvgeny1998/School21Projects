# Day 08 - Piscine SQL

## Задача
1. Для этой задачи используйте командную строку для базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командной строке).
Предоставьте подтверждение того, что ваш параллельный сеанс не увидит ваши изменения, пока вы не выполните `COMMIT`;
Взгляните на шаги ниже.
**Сеанс №1**
- обновление рейтинга «Pizza Hut» до 5 баллов в режиме транзакции.
- убедитесь, что вы видите изменения в сеансе №1.
**Сеанс №2**
- убедитесь, что вы не видите изменения в сеансе №2.
**Сеанс №1**
- опубликуйте ваши изменения для всех параллельных сеансов.
**Сеанс №2**
- убедитесь, что вы видите изменения в сеансе №2.
2. Для выполнения этой задачи используйте командную строку для базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командной строке).
Перед выполнением задачи убедитесь, что в вашей базе данных установлен уровень изоляции по умолчанию. Просто выполните следующий оператор:
`SHOW TRANSACTION ISOLATION LEVEL;`
и результат должен быть «read commited»;
Если нет, то, пожалуйста, явно установите уровень изоляции «read commited» на уровне сеанса.
| | |
| ------ | ------ |
| Давайте рассмотрим один из известных паттернов базы данных «аномалия потерянных обновлений». Графическое представление этой аномалии представлено на рисунке. Горизонтальная красная линия означает конечный результат после всех последовательных шагов для обоих сеансов. 
Проверьте рейтинг «Pizza Hut» в режиме транзакции для обоих сеансов, после чего выполните `UPDATE` рейтинга до значения 4 в сеансе № 1 и выполните `UPDATE` рейтинга до значения 3,6 в сеансе № 2 (в том же порядке, что и на рисунке).
3. Для этой задачи используйте командную строку базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командных строках).
| | |
| ------ | ------ |
| Давайте проверим один из известных шаблонов базы данных «Lost Update Anomaly», но с уровнем изоляции `REPEATABLE READ`. Графическое представление этой аномалии представлено на рисунке. Горизонтальная красная линия означает конечный результат после всех последовательных шагов для обоих сеансов.
Проверьте рейтинг «Pizza Hut» в транзакционном режиме для обоих сеансов, после чего выполните `UPDATE` рейтинга до значения 4 в сеансе №1 и `UPDATE` рейтинга до значения 3,6 в сеансе №2.
4. Для этой задачи используйте командную строку для базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командных строках).
| | |
| ------ | ------ |
| Давайте проверим один из известных шаблонов базы данных «Non-Repetable Reads», но с уровнем изоляции `READ COMMITTED`. Графическое представление этой аномалии представлено на рисунке. Горизонтальная красная линия означает конечный результат после всех последовательных шагов для обоих сеансов. 
Проверьте рейтинг «Pizza Hut» в транзакционном режиме для сеанса №1, а затем выполните `UPDATE` рейтинга до значения 3,6 в сеансе №2 (в том же порядке, что и на рисунке).
5. Для этой задачи используйте командную строку для базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командной строке).
| | |
| ------ | ------ |
| Давайте проверим один из известных шаблонов базы данных «Non-Repeatable Reads», но с уровнем изоляции `SERIALIZABLE`. Графическое представление этой аномалии представлено на рисунке. Горизонтальная красная линия означает конечный результат после всех последовательных шагов для обоих сеансов. 
Проверьте рейтинг «Pizza Hut» в режиме транзакции для сеанса №1, а затем выполните `UPDATE` рейтинга до значения 3.0 в сеансе №2.
6. Для этой задачи используйте командную строку базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командных строках).
| | |
| ------ | ------ |
| Давайте проверим один из известных шаблонов базы данных «Фантомное чтение», но с уровнем изоляции `READ COMMITTED`. Графическое представление этой аномалии представлено на рисунке. Горизонтальная красная линия означает окончательный результат после всех последовательных шагов для обоих сеансов. 
Суммируйте все рейтинги всех пиццерий в транзакционном режиме для сеанса №1, а затем выполните `UPDATE` рейтинга до 1 для ресторана «Pizza Hut» в сеансе №2.
7. Для этой задачи используйте командную строку базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командных строках).
| | |
| ------ | ------ |
| Давайте проверим один из известных шаблонов базы данных «Фантомное чтение», но с уровнем изоляции `REPEATABLE READ`. Графическое представление этой аномалии представлено на рисунке. Горизонтальная красная линия означает окончательный результат после всех последовательных шагов для обоих сеансов. 
Суммируйте все рейтинги всех пиццерий в транзакционном режиме для сеанса №1, а затем выполните `UPDATE` рейтинга ресторана «Pizza Hut» до значения 5 в сеансе №2.
8. Для этой задачи используйте командную строку для базы данных PostgreSQL (psql). Вам необходимо проверить, как ваши изменения будут опубликованы в базе данных для других пользователей.
На самом деле, нам нужны два активных сеанса (то есть два параллельных сеанса в командной строке).
Давайте воспроизведем ситуацию взаимоблокировки в нашей базе данных.
| | |
| ------ | ------ |
| Графическое представление ситуации взаимоблокировки представлено на рисунке. Похоже на «замок Христа» между параллельными сеансами.  
Напишите любой SQL-оператор с любым уровнем изоляции (можно использовать настройки по умолчанию) для таблицы `pizzeria`, чтобы воспроизвести эту ситуацию взаимоблокировки.
## Срок выполнения
Отведено: 1 день(8 часов).
Дополнительные задачи: отсутствуют.
Выполнено за 1 день.
## Тип проекта
Индивидуальный, весь проект выполнен мной.
## Используемые языки/технологии/библиотеки.
SQL, PostgreSQL.
