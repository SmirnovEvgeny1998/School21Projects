import sys

#sys.path.insert(1, '/Users/burnerwa/Library/Python/3.9/lib/python/site-packages')

from bs4 import BeautifulSoup

with open("../materials/evilcorp.html") as fp:
    soup = BeautifulSoup(fp, "html.parser")

title = soup.title
soup.title.string = "Evil Corp - Stealing your money every day"
name = soup.span.get_text()
new_h = soup.new_tag("h1")
new_h.string = name + ", you are hacked!"
soup.html.body.append(new_h)
new_s = soup.new_tag("script")
new_s.string = """hacked = function() {
            alert('hacked');
        }
        window.addEventListener('load',
          function() {
            var f = document.querySelector("form");
            f.setAttribute("onsubmit", "hacked()");
          },
          false
        );
"""
soup.html.body.append(new_s)
soup.a['href'] = soup.a['href'].replace("https://mrrobot.fandom.com/wiki/E_Corp", "https://mrrobot.fandom.com/wiki/Fsociety")
with open("../materials/evilcorp_hacked.html", "w") as file:
    file.write(str(soup))

